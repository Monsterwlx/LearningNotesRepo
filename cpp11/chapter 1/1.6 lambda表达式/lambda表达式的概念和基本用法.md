lambda表达式即匿名函数，当你需要写一个函数调用时，并且这个函数很小，可能只有1-2行的代码，这时候定义一个函数显得又比较罗嗦，可以就地声明一个lambda表达式。lambda表达式格式如下：

```c++
[捕获外部变量列表](行参列表)mutable exception -> 返回类型 {函数体}
其中行参列表，异常设定，返回类型都是可选项
```

捕获列表可理解为参数的一种类型，lambda表达式内部函数体在默认情况下是不能够使用其外部的变量的，利用捕获列表可起到传递外部变量的作用。

### 捕获外部变量

- 值捕获，即=，意思是以传值方式使用表达式外部的变量
- 引用捕获，即&，以传引用方式使用表达式外部的变量
- 隐式捕获，即捕获列表中只有=或&，让编译器自行推导捕获列表

```c++
int a = 0;
string str = "DongZyy";
auto f0 = [] {cout<<"empty";} // 空捕获列表，不捕获外部变量
auto f1 = [=] {cout << a;} // 值捕获外部所有变量
auto f2 = [a] {cout << a;} // 值捕获a变量，默认是值捕获
auto f3 = [&] {str += " Hello."} // 引用捕获外部所有变量，可修改外部变量
auto f4 = [&str, a] {cout << a;} // 引用捕获str，值捕获a
auto f5 = [=， &str] {cout << a;} // 引用捕获str，值捕获其他所有变量

auto f6 = [&]()->int {++a; return a;}
auto f7 = [&](int b)->int {a += b; return a;}
f7(100);
```

### mutable

它用来指示是否可以修改捕获的变量。

如果以传值方式捕获外部变量，则函数体中不能修改外部变量，否则编译器会报错，这时候可以加上mutable关键字。

```c++
auto f8 = [=] { a++; } // error
auto f9 = [=]() mutable { a++; }; // ok
```





